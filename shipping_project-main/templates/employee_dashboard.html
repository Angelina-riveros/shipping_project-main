<!DOCTYPE html>
<html>
<head>
    <title>Employee Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <header>
        <h2>ğŸ“¦ Delivery Tracking System - Employee Portal</h2>
        <nav>
            <a href="/employee_dashboard">Dashboard</a>
            <a href="/assign_shipment">Assign Shipment</a>
            <a href="/update_status">Update Status</a>
            <a href="/shipments">All Shipments</a>
            <a href="/vehicles">Vehicles</a>
            <a href="/customers">Customers</a>
            <a href="/logout">Logout</a>
        </nav>
    </header>
    
    <h1 style="text-align: center;">Welcome, {{ session.user_name }}! ğŸ‘¨â€ğŸ’¼</h1>
    
    <div style="background: linear-gradient(135deg, #FFF0F5, #FFD4D8); padding: 30px; border-radius: 15px; margin: 20px auto; max-width: 600px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
        <h3 style="color: #8B5E3C; margin-bottom: 20px; text-align: center;">Employee Information</h3>
        <p style="font-size: 16px; margin: 10px 0; text-align: center;"><strong style="color: #8B5E3C;">Name:</strong> <span style="color: #333;">{{ session.user_name or 'N/A' }}</span></p>
        <p style="font-size: 16px; margin: 10px 0; text-align: center;"><strong style="color: #8B5E3C;">Email:</strong> <span style="color: #333;">{{ session.user_email or 'N/A' }}</span></p>
        <p style="font-size: 16px; margin: 10px 0; text-align: center;"><strong style="color: #8B5E3C;">Role:</strong> <span style="color: #333;">{{ session.user_role or 'N/A' }}</span></p>
        <p style="font-size: 16px; margin: 10px 0; text-align: center;"><strong style="color: #8B5E3C;">Employee ID:</strong> <span style="color: #333;">{{ session.user_id or 'N/A' }}</span></p>
    </div>
    
    <h2>âš ï¸ Unassigned Packages</h2>
    {% if unassigned_packages %}
    <div style="background-color: #FFE4A0; border: 2px solid #D8A39D; border-radius: 10px; padding: 15px; margin: 20px 0;">
        <p style="margin: 0; font-weight: bold; color: #8B5E3C;">ğŸ“¦ {{ unassigned_packages|length }} package(s) waiting to be assigned to shipments!</p>
    </div>
    <table border="1">
        <tr>
            <th>Package ID</th>
            <th>Customer</th>
            <th>Delivery Location</th>
            <th>Weight (lbs)</th>
            <th>Value ($)</th>
            <th>Special Cargo</th>
            <th>Actions</th>
        </tr>
        
        {% for pkg in unassigned_packages %}
        <tr style="background-color: #FFF9E6;">
            <td><strong style="color: #D8A39D;">{{ pkg['package_id'] }}</strong></td>
            <td>{{ pkg['name'] }}</td>
            <td>{{ pkg['delivery_location'] }}</td>
            <td>{{ pkg['weight_lbs'] }}</td>
            <td>${{ "%.2f"|format(pkg['declared_value']) }}</td>
            <td>{{ pkg['special_cargo'] }}</td>
            <td>
                <a href="/assign_shipment/{{ pkg['package_id'] }}" style="color: #8B5E3C; font-weight: bold;">Assign Now â†’</a>
            </td>
        </tr>
        {% endfor %}
    </table>
    {% else %}
    <div style="background-color: #D8F4D8; border: 2px solid #90EE90; border-radius: 10px; padding: 15px; margin: 20px 0;">
        <p style="margin: 0; font-weight: bold; color: #2E7D32;">âœ“ All packages have been assigned to shipments!</p>
    </div>
    {% endif %}
    
    <h2>ğŸ“¦ Recent Shipments</h2>
    <table border="1">
        <tr>
            <th>Tracking #</th>
            <th>Customer</th>
            <th>Delivery Location</th>
            <th>Status</th>
            <th>Expected Delivery</th>
            <th>Driver</th>
            <th>Actions</th>
        </tr>
        
        {% for ship in shipments %}
        <tr>
            <td><strong style="color: #8B5E3C;">{{ ship['shipment_id'] }}</strong></td>
            <td>{{ ship['name'] }}</td>
            <td>{{ ship['delivery_location'] }}</td>
            <td>
                <span style="padding: 5px 10px; border-radius: 5px; background-color: 
                    {% if ship['status'] == 'Delivered' %}#D8F4D8
                    {% elif ship['status'] == 'In Transit' %}#FFE4A0
                    {% else %}#FFE4E4{% endif %};">
                    {{ ship['status'] }}
                </span>
            </td>
            <td>{{ ship['expected_delivery_date'] }}</td>
            <td>{{ ship['driver_name'] or 'Not assigned' }}</td>
            <td>
                <a href="/update_status" style="color: #8B5E3C; font-weight: bold;">Update â†’</a>
            </td>
        </tr>
        {% endfor %}
    </table>
    
    <h2>ğŸ“ Recent Customer Inquiries</h2>
    <table border="1">
        <tr>
            <th>Inquiry ID</th>
            <th>Customer</th>
            <th>Subject</th>
            <th>Date</th>
        </tr>
        
        {% for inq in inquiries %}
        <tr>
            <td>{{ inq['inquiry_id'] }}</td>
            <td>{{ inq['name'] }}</td>
            <td>{{ inq['subject'] }}</td>
            <td>{{ inq['created_at'] }}</td>
        </tr>
        {% endfor %}
    </table>
    
    <div style="text-align: center; margin-top: 40px;">
        <a href="/assign_shipment" style="background: linear-gradient(135deg, #8B5E3C, #A0694F); color: white; padding: 15px 30px; border-radius: 30px; text-decoration: none; font-weight: bold; display: inline-block; margin: 10px;">
            ğŸšš Assign Shipment
        </a>
        <a href="/update_status" style="background: linear-gradient(135deg, #8B5E3C, #A0694F); color: white; padding: 15px 30px; border-radius: 30px; text-decoration: none; font-weight: bold; display: inline-block; margin: 10px;">
            âœï¸ Update Status
        </a>
        <a href="/shipments" style="background: linear-gradient(135deg, #8B5E3C, #A0694F); color: white; padding: 15px 30px; border-radius: 30px; text-decoration: none; font-weight: bold; display: inline-block; margin: 10px;">
            ğŸ“‹ View All Shipments
        </a>
    </div>
</body>
</html>
